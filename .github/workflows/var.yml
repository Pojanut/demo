name: Retrieve GitHub Variables

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  retrieve-vars:
    runs-on: windows-2019

    steps:
      - name: Check out repository
        uses: actions/checkout@v2

      - name: view the vars context
        shell: bash
        run: |
          echo "$VARS_CONTEXT"
          echo "variable_name=variable_value" >> $GITHUB_ENV

        env:
          VARS_CONTEXT: ${{ toJson(vars) }}

      - name: Set environment variables
        run: |
          echo "MY_DEV=dev" >> $GITHUB_ENV
          echo "MY_SIT=sit" >> $GITHUB_ENV

      - name: View environment variables
        run: |
          echo "MY_DEV: $MY_DEV"
          echo "MY_SIT: $MY_SIT"
          echo "PATH: $PATH"
          echo "RUNNER_OS: $RUNNER_OS"
        env:
          MY_VAR: ${{ env.MY_DEV }}
          MY_SIT: ${{ env.MY_SIT }}

      - name: Print all environment variables
        run: printenv